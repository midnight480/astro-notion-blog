---
---
<div class="theme-toggle">
  <button id="theme-toggle" aria-label="テーマ切り替え">
<svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
  <path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42m12.72-12.72l1.42-1.42M12 6a6 6 0 100 12 6 6 0 000-12z"/>
</svg>
    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
      <path d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"/>
    </svg>
  </button>
</div>

<script>
  const theme = (() => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      return localStorage.getItem('theme');
    }
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      return 'dark';
    }
    return 'light';
  })();

  if (theme === 'light') {
    document.documentElement.classList.remove('dark');
  } else {
    document.documentElement.classList.add('dark');
  }

  window.localStorage.setItem('theme', theme);

  const handleToggleClick = () => {
    const element = document.documentElement;
    element.classList.toggle('dark');

    const isDark = element.classList.contains('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  };

  document
    .getElementById('theme-toggle')
    ?.addEventListener('click', handleToggleClick);
</script>

<style>
  .theme-toggle {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 100;
  }

  button {
    border: none;
    background: none;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 0.5rem;
    background-color: var(--bg);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }

  .sun-icon,
  .moon-icon {
    fill: var(--fg);
  }

  :global(.dark) .sun-icon {
    display: block;
  }

  :global(.dark) .moon-icon {
    display: none;
  }

  .sun-icon {
    display: none;
  }

  .moon-icon {
    display: block;
  }
</style> 