---
export interface Props {
  repo: string
  repoId: string
  category: string
  categoryId: string
  mapping?: string
  strict?: boolean
  reactionsEnabled?: boolean
  emitMetadata?: boolean
  inputPosition?: 'top' | 'bottom'
  theme?: 'light' | 'dark' | 'preferred_color_scheme'
  lang?: string
  loading?: 'lazy' | 'eager'
}

const {
  repo,
  repoId,
  category,
  categoryId,
  mapping = 'pathname',
  strict = false,
  reactionsEnabled = true,
  emitMetadata = false,
  inputPosition = 'bottom',
  theme = 'preferred_color_scheme',
  lang = 'ja',
  loading = 'lazy'
} = Astro.props
---

<div class="comments-container">
  <script src="https://giscus.app/client.js"
    data-repo={repo}
    data-repo-id={repoId}
    data-category={category}
    data-category-id={categoryId}
    data-mapping={mapping}
    data-strict={strict}
    data-reactions-enabled={reactionsEnabled}
    data-emit-metadata={emitMetadata}
    data-input-position={inputPosition}
    data-theme={theme}
    data-lang={lang}
    data-loading={loading}
    crossorigin="anonymous"
    async>
  </script>
</div>

<style>
  .comments-container {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid #e5e7eb;
  }
  
  :global(.dark) .comments-container {
    border-top-color: #374151;
  }
</style> 